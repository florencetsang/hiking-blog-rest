CREATE USER hbaadmin WITH PASSWORD 'hbaAdmin' CREATEDB; --for dev only

CREATE DATABASE TH;

CREATE TABLE HIKING_ROUTES
(
	ID SERIAL PRIMARY KEY,
	NAME VARCHAR(100),
	DESCRIPTION TEXT,
	PATH_COORDINATES TEXT,
	USER_ID VARCHAR(100) NOT NULL,
	from_date timestamp without time zone,
    to_date timestamp without time zone
);

CREATE TABLE TAG
(
    ID SERIAL PRIMARY KEY,
    NAME VARCHAR(100),
    DESCRIPTION TEXT,
    USER_ID VARCHAR(100) NOT NULL
);

CREATE TABLE TRIP_TAG
(
    ID SERIAL PRIMARY KEY,
    TRIP_ID INT REFERENCES HIKING_ROUTES,
    TAG_ID INT REFERENCES TAG,
    USER_ID VARCHAR(100) NOT NULL
);

ALTER TABLE IF EXISTS hiking_routes
    ADD COLUMN from_date timestamp without time zone;
ALTER TABLE IF EXISTS hiking_routes
	ADD COLUMN to_date timestamp without time zone;
UPDATE hiking_routes SET from_date = CURRENT_TIMESTAMP, to_date = CURRENT_TIMESTAMP;
